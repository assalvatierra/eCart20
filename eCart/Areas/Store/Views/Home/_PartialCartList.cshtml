@model IEnumerable<eCart.Models.CartDetail>



<div class="col-lg-12">
    <h2> Active Shoppers Carts </h2>
    <hr />
</div>

<div class="panel panel-default col-lg-12">
    <table class="table">
        <thead>
            <tr style="font-weight:bold;">
                <td> Cart Id </td>
                <td> Status </td>
                <td> Shopper </td>
                <td> Contact # </td>
                <td> Delivery Type </td>
                <td> Pickup Date </td>
                <td> Pickup Location </td>
                <td> Total Items </td>
                <td> Total Amount </td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            @{
                var itemCount = 0;
                decimal totalAmount = 0;
            }
            @foreach (var cart in Model)
            {
                foreach (var item in cart.CartItems)
                {
                    itemCount++;
                    totalAmount += item.ItemQty * item.StoreItem.UnitPrice;
                }
                <tr>
                    <td>
                        @cart.Id
                    </td>
                    <td>
                        @cart.CartStatu.Name
                    </td>
                    <td>
                        @cart.UserDetail.Name
                    </td>
                    <td>
                        @cart.UserDetail.Mobile
                    </td>
                    <td>
                        @cart.DeliveryType
                    </td>
                    <td>
                        @cart.DtPickup.ToString("MMM dd yyyy h:mm tt")
                    </td>
                    <td>
                        @cart.StorePickupPoint.Address
                    </td>
                    <td>
                        @itemCount
                    </td>
                    <td>
                        @totalAmount.ToString("0.00")
                    </td>
                    <td>
                        @Html.ActionLink("View Cart", "Details", "CartDetails", new { id = cart.Id }, null )
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
